
<!DOCTYPE HTML>
<!--
	TXT by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->

	
<html>
	<head>
		<title>Projet Biblio</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<script src="https://code.jquery.com/jquery-3.1.1.js" integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA=" crossorigin="anonymous"></script>
   		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
   		<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
   		<script type="text/javascript" charset="utf-8" src="cordova.js"></script>  		
		
	
	</head>
	<body class="homepage">
						<div id="page-wrapper">

			
			<!-- Nav -->
				<nav id="nav">
					<ul>
						<li class="current"><a href="index.html">Home</a></li>
						<li>
							<a href="#">Dropdown</a>
							<ul>
								<li><a href="#">Lorem ipsum dolor</a></li>
								<li><a href="#">Magna phasellus</a></li>
								<li>
									<a href="#">Phasellus consequat</a>
									<ul>
										<li><a href="#">Lorem ipsum dolor</a></li>
										<li><a href="#">Phasellus consequat</a></li>
										<li><a href="#">Magna phasellus</a></li>
										<li><a href="#">Etiam dolore nisl</a></li>
									</ul>
								</li>
								<li><a href="#">Veroeros feugiat</a></li>
							</ul>
						</li>
						<li><a href="left-sidebar.html">Left Sidebar</a></li>
						<li><a href="right-sidebar.html">Right Sidebar</a></li>
						<li><a href="no-sidebar.html">No Sidebar</a></li>
					</ul>
				</nav>

			<!-- Main -->
				<div id="main-wrapper">
					<div id="main" class="container">
						
						
						<div class="row 200%">
							<div class="12u">

								<!-- Blog -->
									<section class="box blog">
										<h2 class="major"><span>Géolocalisation</span></h2>
										<div>
											<div class="row">
												<div class="9u 12u(mobile)">
													<div class="content content-left">

														<!-- Featured Post -->
															<article class="box post">
																<header>
																	<h3>Parcours de la journée</h3>
																	<ul class="meta">
																		<li class="icon fa-clock-o" id="dernier_deplacement"></li>
																	</ul>
																</header>

																<div class="map" id="principale" style='height: 400px;' longitude="131.044" latitude="-25.363"></div>

															</article>

													</div>
												</div>
												<div class="3u 12u(mobile)">
													<div class="sidebar">

														<!-- Archives -->
															<ul class="divided">
																<li>
																	<article id="geo1" class="box post-summary">
																		<h3>Hier</h3>
																			<div class="map_s" style='height: 200px;'></div>

																	</article>
																</li>
																<li>
																	<article id="geo2" class="box post-summary">
																		<h3>Avant-Hier</h3>
																			<div class="map_s" style='height: 200px;'></div>

																	</article>
																</li>
																															</ul>

													</div>
												</div>
											</div>
										</div>
									</section>

							</div>
						</div>
					</div>
				</div>

			<!-- Footer -->
				<footer id="footer" class="container">
					<div class="row 200%">
						<div class="12u">

							<!-- About -->
								<section>
									<h2 class="major"><span>Whats this about?</span></h2>
									<p>
										This is <strong>TXT</strong>, yet another free responsive site template designed by
										<a href="http://twitter.com/ajlkn">AJ</a> for <a href="http://html5up.net">HTML5 UP</a>. Its released under the
										<a href="http://html5up.net/license/">Creative Commons Attribution</a> license so feel free to use it for
										whatever youre working on (personal or commercial), just be sure to give us credit for the design.
										Thats basically it :)
									</p>
								</section>

						</div>
					</div>
					<div class="row 200%">
						<div class="12u">

							<!-- Contact -->
								<section>
									<h2 class="major"><span>Get in touch</span></h2>
									<ul class="contact">
										<li><a class="icon fa-facebook" href="#"><span class="label">Facebook</span></a></li>
										<li><a class="icon fa-twitter" href="#"><span class="label">Twitter</span></a></li>
										<li><a class="icon fa-instagram" href="#"><span class="label">Instagram</span></a></li>
										<li><a class="icon fa-dribbble" href="#"><span class="label">Dribbble</span></a></li>
										<li><a class="icon fa-google-plus" href="#"><span class="label">Google+</span></a></li>
									</ul>
								</section>

						</div>
					</div>

					<!-- Copyright -->
						<div id="copyright">
							<ul class="menu">
								<li>&copy; Untitled. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
							</ul>
						</div>

				</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/skel-viewport.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>
			<script src="assets/js/jquery.ui.map.min.js"></script>



    <script>
	
	
	
	var liste = [[48.69019549441861, 6.193392276763916, new Date(2017,3,7,17,10)],[48.69110203715168, 6.205837726593018, new Date(2017,3,7,17,10)],[48.69532291182584,6.216952800750732, new Date(2017,3,7,17,10)]];
	
	
	liste.push([48.692054, 6.184416999999939, new Date(2017,3,8,17,10)],[48.69182796780666, 6.18417352437973, new Date(2017,3,8,17,10)],[48.690634603093095, 6.184854805469513, new Date(2017,3,8,17,10)]);
	
	liste.push([48.70125703304811, 6.210547685623169, new Date(2017,3,9,17,10)],[48.70486814865885, 6.220654249191284, new Date(2017,3,9,17,10)],[48.70498143436868,6.2268126010894775, new Date(2017,3,9,17,10)]);
	
    //
	$(document).ready(function(){
			      
		currentPosition();
		
		$("#dernier_deplacement").text("Denière position "+liste[liste.length-1][2].getDate()+"/"+liste[liste.length-1][2].getMonth()+"/"+liste[liste.length-1][2].getFullYear()+"  "+liste[liste.length-1][2].getHours()+":"+liste[liste.length-1][2].getMinutes());
		
	});
	
	
	    
	    // onSuccess Callback
	    // This method accepts a Position object, which contains the
	    // current GPS coordinates
	    //
	    var onSuccess = function(position) {
	        alert('Latitude: '          + position.coords.latitude          + '\n' +
	              'Longitude: '         + position.coords.longitude         + '\n' +
	              'Altitude: '          + position.coords.altitude          + '\n' +
	              'Accuracy: '          + position.coords.accuracy          + '\n' +
	              'Altitude Accuracy: ' + position.coords.altitudeAccuracy  + '\n' +
	              'Heading: '           + position.coords.heading           + '\n' +
	              'Speed: '             + position.coords.speed             + '\n' +
	              'Timestamp: '         + position.timestamp                + '\n');
	    };
	
	    // onError Callback receives a PositionError object
	    //
	    function onError(error) {
	        alert('code: '    + error.code    + '\n' +
	              'message: ' + error.message + '\n');
	    }
	
      
		function initMap(divmap) {
	      
	      
	      var zoom = 13;
	      if($(divmap).attr("id") != "principale"){
		      zoom = 11;
	      }
			
	        // Create a map object and specify the DOM element for display.
	        var map = new google.maps.Map(divmap, {
	          center: {lat: liste[liste.length-1][0], lng: liste[liste.length-1][1]},
	          scrollwheel: false,
	          zoom: zoom
	        });
	
			var auj = new Date();
			
			for(var i =0; i<liste.length; i++){
				
				

				if($(divmap).attr("id") == "principale" && liste[i][2].getDate() == 9){
				
					 // Create a marker and set its position.
			        var marker = new google.maps.Marker({
			          map: map,
			          position: {lat: liste[i][0], lng: liste[i][1]},
			          title: 'Hello World!'
			        });
				}
				
				
				if($(divmap).parent().attr("id") == "geo1" && liste[i][2].getDate() == 8){
				
					 // Create a marker and set its position.
			        var marker = new google.maps.Marker({
			          map: map,
			          position: {lat: liste[i][0], lng: liste[i][1]},
			          title: 'Hello World!'
			        });
				}
				
				
				if($(divmap).parent().attr("id") == "geo2" && liste[i][2].getDate() == 7){
				
					 // Create a marker and set its position.
			        var marker = new google.maps.Marker({
			          map: map,
			          position: {lat: liste[i][0], lng: liste[i][1]},
			          title: 'Hello World!'
			        });
				}
			}
			
	      
	      }
	      
	   
	      
	      
	      function setCurrentPosition(position){
		      
		      if(device.platform != "browser"){
			      liste.push([position.coords.latitude, position.coords.longitude, new Date()]);
				  afficheCarte();
				} else {
					var t=setInterval(afficheCarte,5000);
				 }
	      }



		  function afficheCarte(){
			  
		  	initMap($(".map")[0]);
			initMap($(".map_s")[0]);
			initMap($(".map_s")[1]);			
		  }
		  
	    function currentPosition(){
        	navigator.geolocation.getCurrentPosition(setCurrentPosition, onError);
        	
        	var cartes = document.getElementsByClassName("map_s");
        	
	    }
	    
	    
	    function onWatchSuccess(position) {

	        /*var element = 'Latitude: '  + position.coords.latitude      + '<br />' +
	                            'Longitude: ' + position.coords.longitude     + '<br />' +

			console.log(element);*/
	    }
	
	
	
	    var watchID = navigator.geolocation.watchPosition(setCurrentPosition, onError, { timeout: 3000000 });

	   
		   	    
	</script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAB_mFktea8oNVMp7uvXzGP4ClLU1STAkc&callback=currentPosition"
    async defer></script>
  





	</body>
</html>
